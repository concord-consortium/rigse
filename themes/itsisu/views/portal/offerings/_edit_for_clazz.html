/ %h2 BEGIN: Custom code for ITSI-SU
/ required locals: is_being_edited
- if portal_clazz.is_teacher? current_user
  .action_menu
    %p
      %strong="Class word: #{portal_clazz.class_word}"
  -# %form{ :id => 'activity_offers_form', :method=>"post", :action=>"/class/edit/#{portal_clazz.id}/process/"}
  = hidden_field_tag 'portal_clazz_id', :portal_clazz.id
  %h2 
    Activities
    -#    TODO: Put the number of offerings for this Clazz here
    /
      %span(class="heading-description")
        ="(Total Selected: "
        %span(class="total-selected")
        =")"
  %h3 Checked Activities are assigned to this class.
  %h4 Published Activities:
  = render :partial => 'portal/offerings/runnable_list', :locals => {:activities => Activity.published, :portal_clazz => portal_clazz, :is_being_edited => is_being_edited}
  %h4 Activities you have authored:
  = render :partial => 'portal/offerings/runnable_list', :locals => {:activities => current_user.activities, :portal_clazz => portal_clazz, :is_being_edited => is_being_edited}
- else
  - portal_clazz.offerings.each do |offering|
    = render :partial => 'shared/offering_for_student', :locals => {:offering => offering}

-#
  -# TODO: Put this code into a accordion div that is hidden by default and get the drag and drop to work again
  %hr
  %h2 Drag and drop interface:
  - if portal_clazz.is_teacher? current_user
    .action_menu
      %p
        %strong="Class word: #{portal_clazz.class_word}"
    %br
    .action_menu
      .action_menu_left
        %p
          %strong="Assignments:" 
          (drag items from the search area below to add)
    / shared/offering_for_teacher
    #clazz_offerings.drop_target
      = render :partial => 'shared/offering_for_teacher', :collection => portal_clazz.offerings, :as => :offering
    %br
    / shared/runnable_list
    = render :partial => "shared/runnable_list", :locals => {:portal_clazz_id => portal_clazz.id, :is_teacher => true, :domain_id => @domain_id, :grade_span => @grade_span}
  
  
  
    = drop_receiving_element 'clazz_offerings', :hoverclass=> 'drop_target_selected', :accept => 'runnable', :url=> {:action=>'add_offering'}, :before => "element.hide();", :with => "{runnable_id: decode_model(element).id, runnable_type: decode_model(element).type, dragged_dom_id: element.id, dropped_dom_id: 'clazz_offerings'}"
    = drop_receiving_element 'offering_list',  :hoverclass=> 'drop_target_selected', :accept => 'offering', :url=> {:action=>'remove_offering'}, :before => "element.hide();", :with => "{offering_id: decode_model(element).id, dragged_dom_id: element.id, dropped_dom_id: 'offering_list'}"
  - else
    - portal_clazz.offerings.each do |offering|
      = render :partial => 'shared/offering_for_student', :locals => {:offering => offering}
  
  %string Activities you have authored:
  #offering_list.item_collection
    = render :partial => 'activities/runnable_list', :locals => {:activities => current_user.activities}
/ %h2 END: Custom code for ITSI-SU
