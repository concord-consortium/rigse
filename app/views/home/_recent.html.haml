= javascript_include_tag "instructional_materials.js"
  
%div
  .right
    /=Portal::Offering.find(:all, :select => "DISTINCT clazz_id").inspect /
    - counter = 0;
    - clazz = clazz_offering.clazz
    - runnable = clazz_offering.runnable 
    -if runnable.is_a? ::Investigation     
      - investigation_name = runnable.name          
    -elsif runnable.is_a? ::Activity
      - investigation_name = runnable.investigation.name
  
    
    - counter += 1;
    %div        
      %table.recent_activity_table{:border=>0,:cellpadding=>0,:cellspacing=>0,:style=>"width:100%;"}
        %tr{:style=>"align:right"}
          %td{:colspan=>2,:style=>"align:right"}
            %div
              %div{:id=>"oExpandCollapseText_#{counter}",:style=>"width:20px;float:left"} +
              = link_to('Show details', 'javascript: void(0);', :onclick => "showHideActivityDetails('#{counter}',this)")
           
        %tr
          %td{:rowspan=>2,:style=>"vertical-align:top"}
            %table{:style=>"width:120px"}
              %tr
                %th
                  = clazz.name 
                %th
                  = investigation_name
              - if runnable.is_a? ::Activity
                %tr
                  %td{:colspan=>2}
                    = runnable.name
              %tr
                %td{:colspan=>2}
                  Class Size = 
                  = clazz.students.length    
              %tr
                %td{:colspan=>2}
                  %div.right
                    %span.linkbutton.pie
                      Run Report
          %td{:style=>"vertical-align:top;align:left"}
            %table.number_of_activities{:border=>0,:cellpadding=>0,:cellspacing=>0}
              = render :partial => 'recent_activity_graph'
        %tr.legend_data
          %td{:class=>"DivHideShowDetail#{counter}",:colspan=>3,:style=>"float:left;font-size:16px;font-weight:bold"}
            = render :partial => 'recent_details',:locals => { :current_offering => clazz_offering}
           
  
