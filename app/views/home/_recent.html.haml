= javascript_include_tag "instructional_materials.js"
  
%div
  .right
    - clazz = clazz_offering.clazz
    - runnable = clazz_offering.runnable 
    -if runnable.is_a? ::Investigation     
      - investigation_name = runnable.name          
    -elsif runnable.is_a? ::Activity
      - investigation_name = runnable.investigation.name
  
    
    %div        
      %table.recent_activity_table{:border=>0,:cellpadding=>0,:cellspacing=>0,:style=>"width:100%;"}
        %tr{:style=>"align:right"}
          %td{:colspan=>2,:style=>"align:right"}
            %div
              .showhidedetails
                %span.expandcollapse{:id=>"oExpandCollapseText_#{runnable.investigation.id}"} +
                = link_to('Show details', 'javascript: void(0);', :onclick => "showHideActivityDetails('#{runnable.investigation.id}',this)")
           
        %tr
          %td.investigation_info{:rowspan=>2,:style=>"vertical-align:top"}
            %table{:border=>0,:cellpadding=>0,:cellspacing=>0}
              %tr
                %th
                  = clazz.name + ":" 
                %th
                  = investigation_name
              - if runnable.is_a? ::Activity
                %tr
                  %td{:colspan=>2}
                    = runnable.name
              %tr
                %td{:colspan=>2}
                  Class Size = 
                  = clazz.students.length    
              %tr
                %td{:colspan=>2}
                  .report
                    %span.linkbutton.pie
                      = report_link_for(clazz_offering, 'report', 'Run Report')
          %td.investigation_activities.pad15{:style=>"vertical-align:top;align:left"}
            %table.number_of_activities{:border=>0,:cellpadding=>0,:cellspacing=>0,:style=>"width:400px"}
              = render :partial => 'recent_activity_graph', :locals => {:offering => clazz_offering}
        %tr.legend_data
          %td.pad15.expand_collapse_activities{:class=>"DivHideShowDetail#{runnable.investigation.id}",:colspan=>3,:style=>"display:none;float:left;font-size:16px;font-weight:bold"}
            = render :partial => 'recent_details',:locals => { :current_offering => clazz_offering}
           
  
